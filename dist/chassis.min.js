/**
  * v1.0.8 generated on: Fri Nov 20 2015 14:27:53 GMT-0600 (CST)
  * Copyright (c) 2014-2015, Corey Butler. All Rights Reserved.
  */
window.NGN={},Object.defineProperty(window.NGN,"define",{enumerable:!1,writable:!1,configurable:!1,value:function(e,t,n,i){return{enumerable:e,writable:t,configurable:n,value:i}}}),Object.defineProperties(window.NGN,{_slice:NGN.define(!1,!1,!1,function(e){return Array.prototype.slice.call(e)}),_splice:NGN.define(!1,!1,!1,function(e){return Array.prototype.splice.call(e)}),_typeof:NGN.define(!1,!1,!1,function(e){return Object.prototype.toString.call(e).split(" ")[1].replace(/\]|\[/gi,"").toLowerCase()}),_od:NGN.define(!1,!1,!1,function(e,t,n,i,r,o){Object.defineProperty(e,t,NGN.define(n,i,r,o))}),_get:NGN.define(!1,!1,!1,function(e,t){return t=void 0===t?!0:t,{enumerable:t,get:e}}),coalesce:NGN.define(!0,!1,!1,function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e]&&"null"!==NGN._typeof(arguments[e]))return arguments[e];return null}),emit:NGN.define(!1,!1,!1,function(e){NGN.BUS?NGN.BUS.emit.apply(NGN.BUS,arguments):console.info(e)})}),window.NGN.DOM={},Object.defineProperties(window.NGN.DOM,{ready:NGN.define(!0,!1,!1,function(e){document.addEventListener("DOMContentLoaded",e)}),destroy:NGN.define(!0,!1,!1,function(e){var t=this;if("string"==typeof e){var n=e;if(e=document.querySelectorAll(e),0===e.length)return void console.warn('The "'+n+'" selector did not return any elements.');NGN._slice(e).forEach(function(e){t.destroy(e)})}else{var i=NGN._typeof(e);switch(i){case"array":return void e.forEach(function(e){t.destroy(e)});case"nodelist":return void NGN._slice(e).forEach(function(e){t.destroy(e)});case"htmlelement":return void e.parentNode.removeChild(e);default:if(/^html.*element$/.test(i))return void e.parentNode.removeChild(e);console.warn("An unknown error occurred while trying to remove DOM elements."),console.log("Unknown Element",e)}}}),findParent:NGN.define(!0,!1,!1,function(e,t,n){if("string"==typeof e){if(e=document.querySelectorAll(e),0===e.length)return console.warn('"'+e+'" is an invalid CSS selector (Does not identify any DOM elements).'),null;e=e[0]}var i=e.parentNode,r=0;for(n="number"==typeof n?n:-1;null===i.parentNode.querySelector(t)&&"BODY"!==i.nodeName;){if(r++,n>0&&r>n)return null;i=i.parentNode}return i}),indexOfParent:NGN.define(!0,!1,!1,function(e){return NGN._slice(e.parentNode.children).indexOf(e)})}),window.NGN.BUS=function(){var e=[],t=[],n=[],i={},r=function(e,t){var n=e.filter(function(e){return t.toLowerCase()===e[0].toLowerCase()});return 0===n.length?null:(n.length>1&&console.warn("NGN Event Bus: "+n[0][0]+" exists more than once."),n[0].filter(function(e,t){return 0!==t}))},o=function(t){return r.apply(this,[e,t])},a=function(e){return r.apply(this,[t,e])},s=function(e){return r.apply(this,[n,e])},d=function(e,t){return null===e||void 0===e||null===t||void 0===t};return Object.defineProperties(i,{subscribe:NGN.define(!0,!1,!1,function(t,n){if(d(t,n))throw new Error("subscribe() requires a topic and listener function as arguments.");var i=o(t);null!==i&&i.unshift(t),null===i&&(i=[t])&&e.push(i);var r=i.push(n);return e[e.map(function(e){return e[0]}).indexOf(t)]=i,{unsubscribe:function(){i=i.splice(r,1),0===i.length?e.splice(e.map(function(e){return e[0]}).indexOf(t),1):e[e.map(function(e){return e[0]}).indexOf(t)]=i}}}),subscribeOnce:NGN.define(!0,!1,!1,function(e,n){if(d(e,n))throw new Error("subscribeOnce() requires a topic and listener function as arguments.");var i=a(e);null!==i&&i.unshift(e),null===i&&(i=[e])&&t.push(i),i.push(n),t[t.map(function(e){return e[0]}).indexOf(e)]=i}),on:NGN.define(!0,!1,!1,function(){return this.subscribe.apply(this,arguments)}),once:NGN.define(!0,!1,!1,function(){return this.subscribeOnce.apply(this,arguments)}),bind:NGN.define(!0,!1,!0,function(e,t,i){t="string"==typeof t?[t]:t;var r=s(e);null!==r&&r.unshift(e),null===r&&(r=[e])&&n.push(r);var o=this,a=function(e){t.forEach(function(t){o.publish(t,void 0!==e?e:{})})},d=r.push(a);return n[n.map(function(e){return e[0]}).indexOf(e)]=r,{remove:function(){r=r.splice(d,1),0===r.length?n.splice(n.map(function(e){return e[0]}).indexOf(e),1):n[n.map(function(e){return e[0]}).indexOf(e)]=r}}}),execWildcardListeners:NGN.define(!1,!1,!1,function(e,t,n,i){var r={eventName:e};i=void 0===i?!0:i,n=n.filter(function(t){if(t[0].indexOf("*")>=0){var n=new RegExp(t[0].replace("*",".*","gi"));return n.test(e)}return!1}),i&&(n=n.map(function(e){return e.slice(1,e.length)})),n.forEach(function(e){e.forEach(function(e){e.call(r,void 0!==t?t:{})})})}),execListeners:NGN.define(!1,!1,!1,function(e,t,n){var i={eventName:e};null!==n&&n.forEach(function(e){e.call(i,void 0!==t?t:{})})}),publish:NGN.define(!0,!1,!1,function(n,i){var r=o(n),d=a(n),l=s(n);this.execListeners(n,i,r),null!==d&&(t=t.filter(function(e){return e[0].toLowerCase()!==n.toLowerCase()}),this.execListeners(n,i,d)),this.execListeners(n,i,l),this.execWildcardListeners(n,i,e),this.execWildcardListeners(n,i,t),t=t.filter(function(e){if(e[0].indexOf("*")>=0){var t=new RegExp(e[0].replace("*",".*","gi"));return!t.test(n)}return!0}),this.execWildcardListeners(n,i,t,!1)}),clear:NGN.define(!1,!1,!1,function(i){var r=function(e){return e.filter(function(e){return e[0].toLowerCase()!==i.toLowerCase()})};e=r(e),t=r(t),n=r(n)}),emit:NGN.define(!0,!1,!1,function(){return this.publish.apply(this,arguments)}),subscribers:NGN._get(function(){var n={};return e.forEach(function(e){n[e[0]]={persist:e.length-1,adhoc:0}}),t.forEach(function(e){n[e[0]]=n[e[0]]||{persist:0},n[e[0]].adhoc=e.length-1}),n}),persistentSubscribers:NGN._get(function(){return e.map(function(e){return e[0]}).sort()}),adhocSubscribers:NGN._get(function(){return t.map(function(e){return e[0]}).sort()}),autoSubscribers:NGN._get(function(){return n.map(function(e){return e[0]}).sort()}),pool:NGN.define(!0,!1,!1,function(e,t,n){"string"!=typeof e&&(t=e,e="");var i=this,r={};Object.keys(t).forEach(function(n){"function"==typeof t[n]?r[n]=i.subscribe((e.trim()||"")+n,t[n]):console.warn((e.trim()||"")+n+" could not be pooled in the event bus because it's value is not a function.")}),n&&n(r)}),attach:NGN.define(!0,!1,!1,function(e){var t=this;return function(){var n=NGN._slice(arguments);n.unshift(e),t.publish.apply(t,n)}})}),i}(),window.NGN.ref=new function(){var e=function(e,t,n,i){if(void 0===NGN.BUS)return console.error("The event BUS is required for "+i+"().");var r=function(e){NGN.BUS.emit(t,e)};n.addEventListener(e,r)},t=function(e,t,n){return"string"==typeof e?document[n?"querySelector":"querySelectorAll"]((e+" > "+t).trim()):e[n?"querySelector":"querySelectorAll"](t.trim())};Object.defineProperties(this,{keys:NGN.define(!1,!0,!1,{}),_find:NGN.define(!1,!1,!1,function(e,t){if("string"==typeof e){var n=window.NGN.ref.find((e+" > "+t).trim());if(0===n.length){var i=window.NGN.ref.find(e.trim())[0].parentNode.querySelectorAll(t);if(i.length>0)return 1===i.length?i[0]:i}return n}return window.NGN.ref.find(e.querySelectorAll(t))}),find:NGN.define(!1,!1,!1,function(n){var i="string"!=typeof n,r=i===!1?document.querySelectorAll(n):n,o=null;if(1===r.length)r[0].hasOwnProperty("isArray")||Object.defineProperties(r[0],{isArray:NGN._get(function(){return!1},!1)}),r[0].hasOwnProperty("find")||NGN._od(r[0],"find",!0,!1,!1,function(e){return window.NGN.ref._find(n,e)}),r[0].hasOwnProperty("forward")||NGN._od(r[0],"forward",!0,!1,!1,function(t,n){e(t,n,this,"forward")}),o=r[0];else{var a=NGN._slice(r);"nodelist"===NGN._typeof(r)&&1===a.length&&(a=a[0]),Object.defineProperties(a,{querySelector:NGN.define(!1,!1,!1,function(e){t(n,e)}),querySelectorAll:NGN.define(!1,!1,!1,function(e){t(n,e,!0)}),addEventListener:NGN.define(!1,!1,!1,function(e,t){for(var n=0;n<this.length;n++)this[n].addEventListener(e,t)}),removeEventListener:NGN.define(!1,!1,!1,function(e,t){for(var n=0;n<this.length;n++)this[n].removeEventListener(e,t)}),find:NGN.define(!0,!1,!1,function(e){return window.NGN.ref._find(n,e)}),isArray:NGN._get(function(){return!0},!1),forward:NGN.define(!1,!1,!1,function(t,n){e(t,n,this,"forward")})}),o=a}return o}),create:{enumerble:!0,writable:!1,configurable:!1,value:function(e,t){if(!t&&"string"!=typeof e)return this.find(e);if("string"!=typeof e&&"number"!=typeof e)throw new Error("Cannot add a non-alphanumeric selector reference.");if(0===e.trim().length)throw new Error("Cannot add a blank selector reference.");if(void 0===t||null===t||0===t.trim().length)throw new Error("Cannot create a null/undefined selector reference.");var n=this.cleanKey(e),i=this;NGN._od(window.NGN.ref,n,!1,!0,!0,t),Object.defineProperty(window.NGN.ref,e,{enumerable:!0,get:function(){return i.find(t)},set:function(e){if(void 0===e||null===e||0===e.trim().length)throw new Error("Cannot create a null/undefined selector reference.");window.NGN.ref[n]=e}}),this.keys[e]=t,this.keys[this.cleanKey(e)]=t}},remove:NGN.define(!0,!1,!1,function(e){this.key&&(delete this.key,delete this.keys[e]);var t=this.cleanKey(e);this[t]&&(delete this[t],delete this.keys[t])}),cleanKey:NGN.define(!1,!1,!1,function(e){return e.replace(/[^A-Za-z0-9\_\#\$\@\-\+]/gi,"")+e.length}),json:{enumerable:!0,get:function(){var e=this,t={};return Object.keys(this).forEach(function(n){e.hasOwnProperty(n)&&["json","find","remove"].indexOf(n.trim().toLowerCase())<0&&"function"!=typeof e[n]&&(t[n]=e.keys[n])}),t}}})};var parser=new DOMParser;window.NGN.HTTP={},Object.defineProperties(window.NGN.HTTP,{xhr:NGN.define(!1,!1,!1,function(e){var t;return window.XMLHttpRequest&&(t=new XMLHttpRequest),t.onreadystatechange=function(){4===t.readyState&&e&&e(t)},t}),run:NGN.define(!1,!1,!1,function(e,t,n){var i=NGN.HTTP.xhr(n);i.open(e,t,!0),i.send()}),applyRequestSettings:NGN.define(!1,!1,!1,function(e,t){if(!e||!t)throw new Error("No XHR or configuration object defined.");if(t.params){var n=Object.keys(t.params).map(function(e){return e+"="+encodeURIComponent(t.params[e])});t.url+="?"+n.join("&")}e.open(t.method||"POST",t.url,!0),t.header=t.header||t.headers||{},Object.keys(t.header).forEach(function(n){e.setRequestHeader(n,t.header[n])});var i=null;return t.json?((!t.header||t.header&&!t.header["Content-Type"])&&e.setRequestHeader("Content-Type","application/jsoncharset=UTF-8"),i=JSON.stringify(t.json).trim()):t.body?((!t.header||t.header&&!t.header["Content-Type"])&&e.setRequestHeader("Content-Type","application/text"),i=t.body):t.form&&(i=new FormData,Object.keys(t.form).forEach(function(e){i.append(e,t.form[e])})),t.withCredentials&&(e.withCredentials=t.withCredentials),t.username&&t.password?e.setRequestHeader("Authorization","Basic "+btoa(t.username+":"+t.password)):t.accessToken&&e.setRequestHeader("Authorization","Bearer "+t.accessToken),i}),send:NGN.define(!0,!1,!1,function(e,t){e=e||{};var n=this.xhr(t),i=this.applyRequestSettings(n,e);n.send(i)}),prepend:NGN.define(!1,!1,!1,function(e,t){return e=NGN._slice(e),e.unshift(t),e}),get:NGN.define(!0,!1,!1,function(){if("object"==typeof arguments[0]){var e=arguments[0];return e.method="GET",e.url="string"==typeof arguments[1]?arguments[1]:e.url,this.send(e,arguments[arguments.length-1])}this.run.apply(this.run,this.prepend(arguments,"GET"))}),put:NGN.define(!0,!1,!1,function(e,t){e=e||{},e.method="PUT",e.url=e.url||window.location,this.send(e,t)}),post:NGN.define(!0,!1,!1,function(e,t){e=e||{},e.method="POST",e.url=e.url||window.location,this.send(e,t)}),"delete":NGN.define(!0,!1,!1,function(){this.run.apply(this.run,this.prepent(arguments,"DELETE"))}),json:NGN.define(!0,!1,!1,function(e,t,n){"string"==typeof e&&(n=t,t=e,e=null),null===e?this.run("GET",t,function(e){if(200!==e.status)throw Error("Could not retrieve JSON data from "+t+" (Status Code: "+e.status+").");try{e.json=JSON.parse(e.responseText)}catch(i){e.json=null}n&&n(e.json)}):(e.url=t,this.get(e,function(e){if(200!==e.status)throw Error("Could not retrieve JSON data from "+t+" (Status Code: "+e.status+").");try{e.json=JSON.parse(e.responseText)}catch(i){e.json=null}n&&n(e.json)}))}),normalizeUrl:NGN.define(!1,!1,!1,function(e){var t=[];return e.split("/").forEach(function(e){".."===e?t.pop():"."!==e&&t.push(e)}),t.join("/")}),"import":NGN.define(!0,!1,!1,function(e,t,n){var i=null;try{i=e.split("/").pop().split("?")[0].split(".").pop().toLowerCase();var r;"js"===i?(r=document.createElement("script"),r.setAttribute("type","text/javascript"),r.setAttribute("src",e)):"css"===i&&(r=document.createElement("link"),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e)),document.getElementsByTagName("head")[0].appendChild(r),t&&t()}catch(o){}if(!(["js","css"].indexOf((i||"").trim().toLowerCase())>=0)){if(n="boolean"==typeof n?n:!1,"http"!==e.substr(0,4)){var a=window.location.href.split("/");a.pop(),e=a.join("/")+"/"+e}if(!n&&this.importCache.hasOwnProperty(e)){var s=this.createElement(this.importCache[e]);return t&&t(1===s.length?s[0]:s),void(window.NGN.BUS&&window.NGN.BUS.emit("html.import",1===s.length?s[0]:s))}var d=this;this.get(e,function(n){if(200!==n.status)return console.warn("Check the file path of the snippet that needs to be imported. "+e+" could not be found ("+n.status+")");var i=d.createElement(n.responseText);if(d.importCache[e]=n.responseText,0===i.length)console.warn(d.normalizeUrl(e)+" import has no HTML tags."),t&&t(n.responseText),window.NGN.BUS&&window.NGN.BUS.emit("html.import",n.responseText);else{var r=1===i.length?i[0]:i;t&&t(r),window.NGN.BUS&&window.NGN.BUS.emit("html.import",r)}})}}),processImport:NGN.define(!1,!1,!1,function(e,t,n,i){i=void 0!==i?i:!1,this["import"](e,function(e){if("string"==typeof e)e=document.createTextNode(e);else if(e.length){var r=[];return NGN._slice(e).forEach(function(e){i?(r.push(t.parentNode.insertBefore(e,t)),t=e):r.push(t.appendChild(e))}),void(n&&n(r))}i?t.parentNode.insertBefore(e,t):t.appendChild(e),n&&n(e)})}),importTo:NGN.define(!0,!1,!1,function(e,t,n){this.processImport(e,t,n)}),importBefore:NGN.define(!0,!1,!1,function(e,t,n){this.processImport(e,t,n,!0)}),template:NGN.define(!0,!1,!1,function(e,t,n){e=this.normalizeUrl(e),"function"==typeof t&&(n=t,t={}),t=t||{};var i,r=this;return this.importCache.hasOwnProperty(e)?(i=this.importCache[e],this.applyData(i,t,n)):void this.get(e,function(i){var o=null;try{o=e.split("/").pop().split("?")[0].split(".").pop().toLowerCase()}catch(a){}return["js","css"].indexOf((o||"").trim().toLowerCase())>=0?void console.warn("Cannot use a ."+o+" file as a template. Only HTML templates are supported."):(r.importCache[e]=i.responseText,void r.applyData(i.responseText,t,n))})}),importCache:NGN.define(!1,!0,!1,{}),createElement:NGN.define(!1,!1,!1,function(e){return parser.parseFromString(e,"text/html").querySelector("body").children}),applyData:NGN.define(!1,!1,!1,function(e,t,n){if(void 0===e)return console.warn("Empty template."),void(n&&n());Object.keys(t).forEach(function(n){var i=new RegExp("{{"+n+"}}","gm");e=e.replace(i,t[n])}),e=e.replace(/(\{\{.*\}\})/gm,"");var i=this.createElement(e);n&&n(i[0])})});var __preventfouc=function(){var e=document.createElement("style"),t=document.createTextNode('img[src$=".svg"]{display:none}svg.loading{height:0px !importantwidth:0px !important}');e.appendChild(t),document.head.appendChild(e)};__preventfouc(),window.NGN=window.NGN||{},window.NGN.DOM=window.NGN.DOM||{},window.NGN.DOM.svg={},Object.defineProperties(window.NGN.DOM.svg,{cache:NGN.define(!1,!1,!0,{}),swap:NGN.define(!1,!1,!1,function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(null!==NGN.DOM.svg.cache[i.src]&&null!==i&&null!==i.parentNode){for(var r=NGN.DOM.svg.cache[i.src].cloneNode(!0),o=i.attributes,a=0;a<o.length;a++)i.hasAttribute(o[a].name)&&"src"!==o[a].name.toLowerCase()&&r.setAttribute(o[a].name,o[a].value);if(r.classList)for(var s=0;s<i.classList.length;s++)r.classList.add(i.classList[s]);else r.setAttribute("class",i.getAttribute("class"));i.parentNode.replaceChild(r,i)}}t&&t()}),update:NGN.define(!0,!1,!1,function(e,t){"function"==typeof e?(t=e,e=document.body):e=e||document.body,"#text"!==e.nodeName&&(e=e.hasOwnProperty("length")===!0?NGN._splice(e):[e],e.forEach(function(e){for(var n=e.querySelectorAll('img[src$=".svg"]'),i=0;i<n.length;i++)NGN.DOM.svg.cache[n[i].src]=NGN.DOM.svg.cache[n[i].src]||null;var r=0,o=function(e,t){var n=document.createElement("div");n.innerHTML=t,NGN.DOM.svg.cache[e]=n.querySelector("svg"),NGN.DOM.svg.cache[e].removeAttribute("id"),NGN.DOM.svg.cache[e].removeAttribute("xmlns:a")};Object.keys(NGN.DOM.svg.cache).forEach(function(e){var t=!1;try{t=void 0!==require}catch(n){}if(t){try{o(e,require("fs").readFileSync(e.replace("file://","")).toString())}catch(n){console.log(n.stack)}r++}else NGN.HTTP.get(e,function(t){200===t.status&&o(e,t.responseText),r++})});var a=setInterval(function(){r===Object.keys(NGN.DOM.svg.cache).length&&(clearInterval(a),NGN.DOM.svg.swap(n,t))},5)}))})}),window.NGN=window.NGN||{},window.NGN.DATA=window.NGN.DATA||{},window.NGN.DATA.Entity=function(e){e=e||{};var t=this;Object.defineProperties(this,{idAttribute:NGN.define(!1,!1,!1,e.idAttribute||"id"),fields:NGN.define(!1,!0,!0,e.fields||{id:{required:!0,type:String,"default":e.id||null}}),virtuals:NGN.define(!1,!0,!0,e.virtuals||{}),validators:NGN.define(!1,!0,!1,{}),validation:NGN.define(!0,!0,!1,NGN.coalesce(e.validation,!0)),isNew:NGN.define(!1,!0,!1,!0),isDestroyed:NGN.define(!1,!0,!1,!1),modified:NGN._get(function(){return this.changelog.length>0}),oid:NGN.define(!1,!0,!0,e[this.idAttribute]||null),id:{enumerable:!0,get:function(){return this.oid},set:function(e){this[this.idAttribute]=e,this.oid=e}},allowInvalidSave:NGN.define(!1,!0,!1,NGN.coalesce(e.allowInvalidSave,!1)),disableDataValidation:NGN.define(!1,!0,!1,NGN.coalesce(e.disableDataValidation,!1)),invalidDataAttributes:NGN.define(!1,!0,!1,[]),initialDataAttributes:NGN.define(!1,!0,!1,[]),changelog:NGN.define(!1,!0,!1,[]),_nativeValidators:NGN.define(!1,!1,!1,{min:function(e,t){return t instanceof Array?t.length>=e:t instanceof Number?t>=e:t instanceof String?t.trim().length>=e:t instanceof Date?t.parse()>=e.parse():!1},max:function(e,t){return t instanceof Array?t.length<=e:t instanceof Number?e>=t:t instanceof String?t.trim().length<=e:t instanceof Date?t.parse()<=e.parse():!1},"enum":function(e,t){return e.indexOf(t)>=0},required:function(e){return this.hasOwnProperty(e)}}),dataMap:NGN.define(!0,!0,!1,e.dataMap||null),raw:NGN.define(!1,!0,!1,{}),addValidator:NGN.define(!0,!1,!1,function(e,t){if(!this.hasOwnProperty(e))return void console.warn("No validator could be create for "+e.toUpperCase()+". It is not an attribute of "+this.type.toUpperCase()+".");switch(typeof t){case"function":this.validators[e]=this.validators[e]||[],this.validators[e].push(t),NGN.emit("validator.add",e);break;case"object":Array.isArray(t)?(this.validators[e]=this.validators[e]||[],this.validators[e].push(function(e){return t.indexOf(e)>=0}),NGN.emit("validator.add",e)):t.test?(this.validators[e]=this.validators[e]||[],this.validators[e].push(function(e){return t.test(e)}),NGN.emit("validator.add",e)):console.warn("No validator could be created for "+e.toUpperCase()+". The validator appears to be invalid.");break;case"string":case"number":case"date":this.validators[e]=this.validators[e]||[],this.validators[e].push(function(e){return e===t}),NGN.emit("validator.add",e);break;default:console.warn("No validator could be create for "+e.toUpperCase()+". The validator appears to be invalid.")}}),removeValidator:NGN.define(!0,!1,!1,function(e){this.validators.hasOwnProperty(e)&&(delete this.validators[e],NGN.emit("validator.remove",e))}),validate:NGN.define(!0,!1,!1,function(e){var t=!0,n=this;if(e&&this.validators.hasOwnProperty(e)){for(o=0;o<this.validators[e].length;o++)if(!n.validators[e][o](n[e]))return n.invalidDataAttributes.indexOf(e)<0&&n.invalidDataAttributes.push(e),!1;return!0}for(var i in this.validators)if(this[i]&&this.validators.hasOwnProperty(i)){for(var r=!0,o=0;o<this.validators[i].length&&(r=this.validators[i][o](this[i]),r);o++);!r&&this.invalidDataAttributes.indexOf(i)<0&&this.invalidDataAttributes.push(i),t&&!r&&(t=!1)}return!0}),valid:NGN._get(function(){return 0===this.invalidDataAttributes.length}),datafields:NGN._get(function(){var e=[];for(var t in this.fields)e.push(t);return e}),getDataField:NGN.define(!0,!1,!1,function(e){return this.fields[e]}),hasDataField:NGN.define(!0,!1,!1,function(e){return this.fields.hasOwnProperty(e)}),record:NGN._get(function(){var e=this.serialize();if(this.dataMap){var t=this;Object.keys(this.dataMap).forEach(function(n){e.hasOwnProperty(n)&&(e[t.dataMap[n]]=e[n],delete e[n])})}return e}),serialize:NGN.define(!1,!1,!1,function(e){var t=e||this.raw,n={};for(var i in t)if(t.nonEnumerableProperties=t.nonEnumerableProperties||"",this.fields.hasOwnProperty(i)&&(i="id"===i?this.idAttribute:i,t.hasOwnProperty(i)&&t.nonEnumerableProperties.indexOf(i)<0&&/^[a-z0-9 ]$/.test(i.substr(0,1))||void 0!==t[i]&&t.enumerableProperties.indexOf(i)>=0)){var r=Object.getOwnPropertyDescriptor(t,i);if(!r.set)switch(typeof r.value){case"function":"Date"===r.value.name?n[i]=t[i].refs.toJSON():"RegExp"===r.value.name&&(n[i]=r.value());break;case"object":t[i]instanceof Array&&!Array.isArray(t[i])&&(t[i]=t[i].slice(0)),n[i]=t[i];break;default:n[i]=t[i]}}return n}),addField:NGN.define(!0,!1,!1,function(e,t){t=void 0!==t?t:!1;var n=this;if("id"!==e.toLowerCase()){if("object"==typeof e){if(!e.name)throw new Error("Cannot create data field. The supplied configuration does not contain a unique data field name.");var i=e;e=i.name,delete i.name}if(void 0!==n[e]&&(console.warn(e+" data field defined multiple times. Only the last defintion will be used."),delete n[e]),n.fields[e]=i||n.fields[e]||{},n.fields[e].required=NGN.coalesce(n.fields[e].required,!1),n.fields[e].type=NGN.coalesce(n.fields[e].type,String),n.fields[e]["default"]=NGN.coalesce(n.fields[e]["default"],null),n.raw[e]=n.fields[e]["default"],n[e]=n.raw[e],Object.defineProperty(n,e,{get:function(){return n.raw[e]},set:function(t){var i=n.raw[e];n.raw[e]=t;var r={action:"update",field:e,old:i,"new":n.raw[e]};this.changelog.push(r),NGN.emit("field.update",r),n.validate(e)||NGN.emit("field.invalid",{field:e})}}),!t){var r={action:"create",field:e};this.changelog.push(r),NGN.emit("field.create",r)}n.fields.hasOwnProperty(e)&&(n.fields[e].hasOwnProperty("pattern")&&n.addValidator(e,n.fields[e].pattern),["min","max","enum"].forEach(function(t){n.fields[e].hasOwnProperty(t)&&n.addValidator(e,function(i){return n._nativeValidators[t](n.fields[e],i)})}),n.fields[e].hasOwnProperty("required")&&n.fields[e].required&&n.addValidator(e,function(e){return n._nativeValidators.required(e)}),n.fields[e].hasOwnProperty("validate")&&("function"==typeof n.fields[e]?n.addValidator(e,function(t){return n.fields[e](t)}):console.warn("Invalid custom validation function. The value passed to the validate attribute must be a function.")))}}),removeField:NGN.define(!0,!1,!1,function(e){if(this.raw.hasOwnProperty(e)){var t=this.raw[e];delete this[e],delete this.fields[e],delete this.raw[e],this.invalidDataAttributes.indexOf(e)>=0&&this.invalidDataAttributes.splice(this.invalidDataAttributes.indexOf(e),1);var n={action:"delete",field:e,value:t};NGN.emit("field.delete",n),this.changelog.push(n)}}),history:NGN._get(function(){return this.changelog.reverse()}),undo:NGN.define(!0,!1,!1,function(e){e=e||1;var t=this.changelog.splice(this.changelog.length-e,e),n=this;t.reverse().forEach(function(e){switch(e.action){case"update":n[e.field]=e.old;break;case"create":n.removeField(e.field);break;case"delete":n.addField(e.field),n[e.field]=n.old}})}),load:NGN.define(!0,!1,!1,function(e){var t=this;e=e||{},Object.keys(e).forEach(function(n){t.raw.hasOwnProperty(n)?t.raw[n]=e[n]:console.warn(n+" was specified as a data field but is not defined in the model.")})})}),this.fields.hasOwnProperty("id")||(e.fields.id={required:!0,type:String,"default":e.id||null}),Object.keys(this.fields).forEach(function(e){t.addField(e,!0)})},window.NGN.DATA.Model=function(e){var t=function(t){this.constructor(e),t&&this.load(t)};return t.prototype=NGN.DATA.Entity.prototype,t},window.NGN=window.NGN||{},window.NGN.DATA=window.NGN.DATA||{},window.NGN.DATA.Store=function(e){e=e||{},Object.defineProperties(this,{model:NGN.define(!0,!1,!1,e.model||null),_data:NGN.define(!1,!0,!1,[]),add:NGN.define(!0,!1,!1,function(e){var t;if(e instanceof NGN.DATA.Entity)t=e;else{try{e=JSON.parse(e)}catch(n){}if("object"!=typeof e)throw new Error("Cannot add a non-object record.");t=this.model?new this.model(e):e}this._data.push(t)}),remove:NGN.define(!0,!1,!1,function(e){"number"==typeof e?this._data.splice(e,1):this._data.splice(this._data.indexOf(e),1)}),clear:NGN.define(!0,!1,!1,function(){this._data=[],NGN.emit("clear")}),records:NGN._get(function(){return this._data.map(function(e){return e.record})}),recordCount:NGN._get(function(){return this._data.length})})};